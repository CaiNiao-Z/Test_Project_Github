

蜂鸣器一般分为电磁式和压电式，电磁式的驱动电压更小，一般1.5V的电压就可以发出85分贝的音压了；压电式蜂鸣器一般需要9V供电。

所以，我们的开发板板载的蜂鸣器是电磁式的有源蜂鸣器。这里的有源是指：蜂鸣器的振动源。我们知道声音是由震动产生的，而有源就是指有源蜂鸣器自带了震荡电路，一通电就会发声，相对于无源蜂鸣器更容易驱动；而无源蜂鸣器必须外部提供 2~5Khz 左右的方波驱动，才能发声。

分析一下：STM32F407 的单个 IO 最大可以提供 25mA 电流（来自数据手册），而蜂鸣器的驱动电流是 30mA 左右，两者十分相近，但是全盘考虑，STM32F407 整个芯片的电流，最大也就 150mA，如果用 IO 口直接驱动蜂鸣器，其他地方用电就得省着点了，所以我们不用 STM32F407 的 IO 直接驱动蜂鸣器，而是通过三极管扩流后再驱动蜂鸣器，这样STM32F407 的 IO 只需要提供不到 1mA 的电流就足够了。

IO 口使用虽然简单，但是和外部电路的匹配设计，还是要十分讲究的，考虑越多，设计就越可靠，可能出现的问题也就越少。

关于NPN和PNP两种类型的三极管的区别可以[观看<魔道电子>的视频讲解](https://www.youtube.com/watch?v=Gi6dF8qBzMM)

NPN和PNP两种类型的三极管都可以使用。

![1.二极管构成的](https://github.com/CaiNiao-Z/Test_Project_Github/blob/main/2.%E8%9C%82%E9%B8%A3%E5%99%A8(Buzzer)%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image/1.%E4%BA%8C%E6%9E%81%E7%AE%A1%E6%9E%84%E6%88%90%E7%9A%84.jpg)

**由于二极管就是一个PN结组成，便于理解可以将三极管看作为两个二极管串联**

工作原理：

正常放大状态下情况下，NPN管，电压大小是:VC>Vb>Ve,如果是硅管的话，三极管导通条件是Vbe>0.7V。PNP管，就是反这来的，VC<Vb,<Ve,如果是硅管的话，其导通条件是Veb>0.7v。

NPN和PNP三极管作为开关使用时和负载的接法。

![2.NPN和PNP三极管的区别](https://github.com/CaiNiao-Z/Test_Project_Github/blob/main/2.%E8%9C%82%E9%B8%A3%E5%99%A8(Buzzer)%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image/2.NPN%E5%92%8CPNP%E4%B8%89%E6%9E%81%E7%AE%A1%E7%9A%84%E5%8C%BA%E5%88%AB.png)

开发板中蜂鸣器的电路图

![3.beep原理图](https://github.com/CaiNiao-Z/Test_Project_Github/blob/main/2.%E8%9C%82%E9%B8%A3%E5%99%A8(Buzzer)%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image/3.beep%E5%8E%9F%E7%90%86%E5%9B%BE.png)

要是蜂鸣器正常工作，那么基极(B)电压就要大于发射极(E)0.7V，电路中发射极接地，电压为零。所以，我们需要单片机IO输出高低电平，来控制蜂鸣器开关状态。设置PF8引脚为推挽输出模式，无需上下拉，当输出高电平时，蜂鸣器打开，输出低电平时蜂鸣器关闭。
